<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruleta de Premios PD</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #fff5f7;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .container {
      max-width: 500px;
      width: 100%;
    }
    h2 {
      color: #e91e63;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }
    #ruletaContainer {
      position: relative;
      margin: 20px auto;
    }
    canvas {
      border: 8px solid #e91e63;
      border-radius: 50%;
      background-color: #fff;
      box-shadow: 0 10px 20px rgba(233,30,99,0.2);
      max-width: 100%;
    }
    #pointer {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 40px solid #e91e63;
      z-index: 10;
    }
    button {
      padding: 12px 30px;
      font-size: 18px;
      margin-top: 20px;
      background-color: #e91e63;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(233,30,99,0.3);
    }
    button:hover {
      background-color: #c2185b;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(233,30,99,0.4);
    }
    button:disabled {
      background-color: #ccc;
      transform: none;
      box-shadow: none;
      cursor: not-allowed;
    }
    #resultado {
      margin-top: 30px;
      padding: 20px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      display: none;
    }
    .premio {
      font-size: 24px;
      color: #e91e63;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .descripcion {
      font-size: 16px;
      color: #666;
    }
    @media (max-width: 500px) {
      canvas {
        width: 300px;
        height: 300px;
      }
      h2 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üé° Gira la Ruleta y Descubre tu Premio üé°</h2>
    
    <div id="ruletaContainer">
      <div id="pointer"></div>
      <canvas id="ruleta" width="400" height="400"></canvas>
    </div>
    
    <button id="btnGirar" onclick="girarRuleta()">üéØ Girar Ruleta</button>
    
    <div id="resultado">
      <div class="premio" id="textoPremio"></div>
      <div class="descripcion" id="textoDescripcion"></div>
    </div>
  </div>

  <script>
    // Premios principales (secciones grandes)
    const premiosPrincipales = [
      {
        texto: "üß∏ ¬°Ganaste un peluche!",
        descripcion: "Solo redimible en tienda. Aplican t√©rminos y condiciones.",
        color: "#FF9FF3"
      },
      {
        texto: "üçΩ ¬°Desayuno sorpresa!",
        descripcion: "Aplican condiciones. V√°lido por 30 d√≠as.",
        color: "#FECA57"
      },
      {
        texto: "üéâ Bono de $30.000",
        descripcion: "Para comprar lo que quieras. V√°lido solo en tienda.",
        color: "#FF6B6B"
      },
      {
        texto: "üéà Bono de $20.000",
        descripcion: "En regalos y sorpresas. Redenci√≥n en punto f√≠sico.",
        color: "#48DBFB"
      },
      {
        texto: "üíù Bono de $10.000",
        descripcion: "Para usar en tu pr√≥xima compra. No acumulable.",
        color: "#1DD1A1"
      }
    ];

    // Mensajes divertidos para "no gan√≥" (secciones m√°s peque√±as)
    const mensajesNoGano = [
      "üéÄ Te hace falta un mo√±o... ¬°pero casi ganas!",
      "üéà Ni con globo, ni con mo√±o... vuelve a intentarlo",
      "üß∏ El peluche te vio... y se escondi√≥ üòÖ",
      "üíå No ganaste, pero somos tu fan",
      "üéÅ Tu regalo viene en camino... pero no hoy üò¨",
      "üõç Este intento no trae sorpresa, ¬°pero no te rindas!",
      "üì¶ Regalo extraviado... sigue participando",
      "üéâ ¬°Uy! Lo envolvimos... pero no te toc√≥",
      "‚ú® No hay premio, pero s√≠ buena vibra ‚ú®",
      "üéÇ Este espacio est√° lleno de nada (pero con cari√±o)",
      "üíò Te sali√≥ un abrazo imaginario üíï",
      "üß® Explosi√≥n de suerte... cancelada",
      "üìÆ Suerte para la pr√≥xima, sigue girando",
      "ü™Ñ Tu suerte est√° tomando forma... pero no ahora",
      "üì∑ Ni con foto del regalo ganabas esta vez"
    ];

    // Combinamos todos los premios (5 principales + 15 mensajes)
    const todosPremios = [...premiosPrincipales];
    mensajesNoGano.forEach(msg => {
      todosPremios.push({
        texto: msg,
        descripcion: "Vuelve a intentarlo en otra oportunidad",
        color: "#D3D3D3"
      });
    });

    // Configuraci√≥n de la ruleta
    const ruleta = document.getElementById("ruleta");
    const ctx = ruleta.getContext("2d");
    const btnGirar = document.getElementById("btnGirar");
    const textoPremio = document.getElementById("textoPremio");
    const textoDescripcion = document.getElementById("textoDescripcion");
    const resultadoDiv = document.getElementById("resultado");
    
    let anguloActual = 0;
    let girando = false;
    const tama√±oSegmento = (2 * Math.PI) / todosPremios.length;

    // Ajustar tama√±o para m√≥viles
    function ajustarTama√±o() {
      if (window.innerWidth <= 500) {
        ruleta.width = 300;
        ruleta.height = 300;
      } else {
        ruleta.width = 400;
        ruleta.height = 400;
      }
      dibujarRuleta();
    }

    // Dibujar la ruleta
    function dibujarRuleta() {
      const centroX = ruleta.width / 2;
      const centroY = ruleta.height / 2;
      const radio = Math.min(centroX, centroY) - 10;
      
      ctx.clearRect(0, 0, ruleta.width, ruleta.height);
      
      // Dibujar segmentos
      todosPremios.forEach((premio, index) => {
        const anguloInicio = anguloActual + (index * tama√±oSegmento);
        const anguloFin = anguloInicio + tama√±oSegmento;
        
        ctx.beginPath();
        ctx.fillStyle = premio.color;
        ctx.moveTo(centroX, centroY);
        ctx.arc(centroX, centroY, radio, anguloInicio, anguloFin);
        ctx.fill();
        
        // Texto del premio
        ctx.save();
        ctx.translate(centroX, centroY);
        ctx.rotate(anguloInicio + tama√±oSegmento / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        
        // Tama√±o de fuente adaptable
        const fontSize = radio / (premio.texto.length > 20 ? 10 : 8);
        ctx.font = `bold ${fontSize}px Arial`;
        
        ctx.fillText(premio.texto, radio - 15, 5);
        ctx.restore();
      });
      
      // Dibujar centro
      ctx.beginPath();
      ctx.fillStyle = "#fff";
      ctx.arc(centroX, centroY, 15, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = "#e91e63";
      ctx.lineWidth = 3;
      ctx.stroke();
    }

    // Girar la ruleta
    function girarRuleta() {
      if (girando) return;
      
      girando = true;
      btnGirar.disabled = true;
      btnGirar.textContent = "Girando...";
      resultadoDiv.style.display = "none";
      
      // Configuraci√≥n de la animaci√≥n
      const vueltas = 5; // N√∫mero de vueltas completas
      const anguloFinal = Math.random() * 2 * Math.PI + (vueltas * 2 * Math.PI);
      const duracion = 5000; // 5 segundos
      const inicio = performance.now();
      
      function animar(timestamp) {
        const tiempoTranscurrido = timestamp - inicio;
        const progreso = Math.min(tiempoTranscurrido / duracion, 1);
        const easing = Math.sin(progreso * Math.PI / 2); // Ease-out
        
        anguloActual = easing * anguloFinal;
        dibujarRuleta();
        
        if (progreso < 1) {
          requestAnimationFrame(animar);
        } else {
          finalizarGiro();
        }
      }
      
      requestAnimationFrame(animar);
    }

    function finalizarGiro() {
      girando = false;
      btnGirar.disabled = false;
      btnGirar.textContent = "üéØ Girar Ruleta";
      
      // Determinar premio ganador
      const anguloGiro = (anguloActual + tama√±oSegmento / 2) % (2 * Math.PI);
      const indiceGanador = Math.floor(anguloGiro / tama√±oSegmento);
      const premioGanado = todosPremios[indiceGanador];
      
      // Mostrar resultado
      textoPremio.textContent = premioGanado.texto;
      textoDescripcion.textContent = premioGanado.descripcion;
      resultadoDiv.style.display = "block";
      
      // Resaltar si es premio principal
      if (premiosPrincipales.some(p => p.texto === premioGanado.texto)) {
        textoPremio.style.color = "#e91e63";
        textoPremio.style.fontSize = "28px";
      } else {
        textoPremio.style.color = "#888";
        textoPremio.style.fontSize = "24px";
      }
    }

    // Inicializar
    window.addEventListener('resize', ajustarTama√±o);
    ajustarTama√±o();
    dibujarRuleta();
  </script>
</body>
</html>
